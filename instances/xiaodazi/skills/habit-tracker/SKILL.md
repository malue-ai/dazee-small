---
name: habit-tracker
description: Track daily habits with streaks, reminders, and progress visualization. Data stored locally.
metadata:
  xiaodazi:
    dependency_level: builtin
    os: [common]
    backend_type: local
    user_facing: true
---

# 习惯追踪

帮助用户建立和追踪日常习惯，记录连续打卡天数，生成进度报告。数据保存在本地。

## 使用场景

- 用户说「帮我追踪每天喝水」「我要养成早起的习惯」
- 用户说「今天的习惯打卡」「我坚持了几天了」
- 用户说「看看我这周的习惯完成情况」
- 用户说「添加一个新习惯：每天运动 30 分钟」

## 执行方式

### 数据存储

在用户数据目录维护一个 JSON 文件 `~/Documents/xiaodazi/habits.json`：

```json
{
  "habits": [
    {
      "id": "drink_water",
      "name": "每天喝 8 杯水",
      "created_at": "2026-02-01",
      "frequency": "daily",
      "records": {
        "2026-02-25": true,
        "2026-02-26": true
      },
      "current_streak": 2,
      "best_streak": 15
    }
  ]
}
```

### 核心操作

**添加习惯**：
```
用户：帮我追踪每天阅读 30 分钟
→ 创建新习惯条目，设置频率为 daily
```

**打卡**：
```
用户：今天的阅读完成了
→ 记录今日完成，更新连续天数
→ 回复：阅读 ✅ 已连续 5 天！
```

**查看进度**：
```
用户：我的习惯完成得怎么样
→ 生成本周/本月进度报告
```

### 进度报告模板

```markdown
## 习惯周报（2/19 - 2/25）

| 习惯 | 一 | 二 | 三 | 四 | 五 | 六 | 日 | 完成率 |
|---|---|---|---|---|---|---|---|---|
| 阅读 30 分钟 | ✅ | ✅ | ❌ | ✅ | ✅ | ✅ | ✅ | 86% |
| 喝 8 杯水 | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | ✅ | 86% |
| 运动 | ❌ | ✅ | ❌ | ✅ | ❌ | ✅ | ❌ | 43% |

### 连续打卡
- 🔥 阅读：当前连续 6 天（最佳 15 天）
- 💧 喝水：当前连续 1 天（最佳 22 天）
- 💪 运动：当前连续 0 天（最佳 7 天）
```

## 输出规范

- 打卡成功时给予正面反馈和连续天数
- 断签时不批评，鼓励重新开始
- 周报使用表格+图标，直观展示完成情况
- 数据始终保存在本地，不上传
