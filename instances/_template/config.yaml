# ============================================================
# å®ä¾‹é…ç½®æ¨¡æ¿
# ============================================================
#
# åˆ›å»ºæ–°å®ä¾‹æ—¶å¤åˆ¶æ­¤ç›®å½•ï¼Œä¿®æ”¹ä»¥ä¸‹é…ç½®å³å¯ã€‚
#
# æ–‡ä»¶ç»“æ„ï¼š
#   config.yaml              â† ä½ åœ¨çœ‹çš„è¿™ä¸ªæ–‡ä»¶ï¼ˆç”¨æˆ·é…ç½®ï¼‰
#   config/skills.yaml       â† Skills ç®¡ç†ï¼ˆæŒ‰éœ€ä¿®æ”¹ï¼‰
#   config/llm_profiles.yaml â† æ¡†æ¶ LLM è·¯ç”±ï¼ˆé«˜çº§ï¼Œé€šå¸¸ä¸æ”¹ï¼‰
#   prompt.md                â† äººæ ¼æç¤ºè¯
#   .env                     â† API Keysï¼ˆä» .env.example å¤åˆ¶ï¼‰
#   skills/                  â† Skill ç›®å½•ï¼ˆæ¯ä¸ª Skill ä¸€ä¸ª SKILL.mdï¼‰
#

# ==================== åŸºç¡€ä¿¡æ¯ ====================

instance:
  name: "my-agent"                  # æ”¹ä¸ºä½ çš„å®ä¾‹åï¼ˆä¸ç›®å½•åä¸€è‡´ï¼‰
  description: "æˆ‘çš„ AI æ­å­"        # ä¸€å¥è¯æè¿°
  version: "1.0.0"

# ==================== ä¸ªæ€§åŒ–é…ç½®ï¼ˆå¯é€‰ï¼‰ ====================

persona:
  nickname: ""                      # å°æ­å­æ€ä¹ˆç§°å‘¼ä½ 
  tone: ""                          # è¯´è¯é£æ ¼ï¼š"ç®€æ´å¹²ç»ƒ" / "å¹½é»˜è½»æ¾" / "ä¸“ä¸šä¸¥è°¨"
  language: "ä¸­æ–‡"
  detail_level: "é€‚ä¸­"              # "ç®€æ´" / "é€‚ä¸­" / "è¯¦ç»†"
  work_dirs: []                     # å¸¸ç”¨å·¥ä½œç›®å½•ï¼š["~/Documents/å·¥ä½œ"]
  custom_rules: []                  # é¢å¤–è§„åˆ™

# ==================== ç”¨æˆ·æç¤ºè¯ï¼ˆå¯é€‰ï¼‰ ====================

user_prompt: ""
# ç¤ºä¾‹ï¼š
#   user_prompt: |
#     æˆ‘æ˜¯ä¸€åäº§å“ç»ç†ï¼Œå¸®æˆ‘å†™æ–‡æ¡£æ—¶é»˜è®¤ç”¨ Markdown æ ¼å¼ã€‚

# ==================== å¤§æ¨¡å‹é…ç½® ====================
#
# provider: ä¸€é”®åˆ‡æ¢æ‰€æœ‰æ¨¡å‹
#   "qwen"  - é€šä¹‰åƒé—®ï¼ˆqwen3-max + qwen-plusï¼‰
#   "claude" - Anthropicï¼ˆclaude-sonnet-4-5 + claude-haiku-4-5ï¼‰
#

# provider å’Œ model ä¸é¢„è®¾ï¼Œä»ç”¨æˆ·é…ç½®çš„ API Key è‡ªåŠ¨è·å–
# ç”¨æˆ·åœ¨è®¾ç½®é¡µé¢å¡«å†™ API Key åï¼Œä¼šè‡ªåŠ¨æ¿€æ´»å¯¹åº”å‚å•†çš„æ¨¡å‹
# ä¹Ÿå¯æ‰‹åŠ¨æŒ‡å®šï¼š
#   agent:
#     provider: "qwen"     # ä¸€é”®åˆ‡æ¢ï¼šqwen / claude
#     model: "qwen3-max"   # ä¸å¡«åˆ™ç”± provider è‡ªåŠ¨å†³å®š
agent: {}

# ==================== å­˜å‚¨ ====================
#
# è¿è¡Œæ—¶æ•°æ®é»˜è®¤æŒ‰ instance.name éš”ç¦»åˆ°ï¼š
#   data/instances/{name}/db/        â†’ æ•°æ®åº“
#   data/instances/{name}/memory/    â†’ è®°å¿†æ–‡ä»¶
#   data/instances/{name}/store/     â†’ å‘é‡ + ç´¢å¼•
#   data/instances/{name}/storage/   â†’ ä¸Šä¼ æ–‡ä»¶
#   data/instances/{name}/playbooks/ â†’ ç­–ç•¥
#   data/instances/{name}/snapshots/ â†’ çŠ¶æ€å¿«ç…§
#
# å¦‚éœ€è‡ªå®šä¹‰å­˜å‚¨ä½ç½®ï¼Œå–æ¶ˆä¸‹é¢çš„æ³¨é‡Šå¹¶å¡«å†™ç»å¯¹è·¯å¾„ï¼š
# storage:
#   data_dir: "/path/to/your/custom/data"
#

# ==================== çŠ¶æ€ä¸€è‡´æ€§ï¼ˆæ–‡ä»¶å¿«ç…§ä¸å›æ»šï¼‰ ====================
#
# Agent æ‰§è¡Œæ–‡ä»¶æ“ä½œå‰è‡ªåŠ¨åˆ›å»ºå¿«ç…§ï¼Œå¼‚å¸¸æ—¶å¯è‡ªåŠ¨æˆ–æ‰‹åŠ¨å›æ»šã€‚
# å¿«ç…§å­˜å‚¨åœ¨ï¼šdata/instances/{name}/snapshots/
#

state_consistency:
  enabled: true
  snapshot:
    retention_hours: 24          # å¿«ç…§ä¿ç•™æ—¶é•¿ï¼ˆå°æ—¶ï¼‰
    max_size_mb: 500             # å•æ¬¡å¿«ç…§æœ€å¤§ä½“ç§¯
    capture_cwd: true            # æ•è·å·¥ä½œç›®å½•
    capture_files: true          # æ•è·æ–‡ä»¶å†…å®¹
    capture_clipboard: true      # æ•è·å‰ªè´´æ¿ï¼ˆä»… macOSï¼‰
  rollback:
    auto_rollback_on_consecutive_failures: 3   # è¿ç»­å¤±è´¥ N æ¬¡è‡ªåŠ¨å›æ»š
    auto_rollback_on_critical_error: true       # ä¸¥é‡é”™è¯¯è‡ªåŠ¨å›æ»š
    rollback_timeout_seconds: 60               # å›æ»šè¶…æ—¶
  consistency_check:
    pre_task_disk_space_mb: 100        # å‰ç½®æ£€æŸ¥ï¼šæœ€ä½ç£ç›˜ç©ºé—´ï¼ˆMBï¼‰
    pre_task_check_permissions: true   # å‰ç½®æ£€æŸ¥ï¼šæ–‡ä»¶æƒé™
    post_task_check_integrity: true    # åç½®æ£€æŸ¥ï¼šæ–‡ä»¶å®Œæ•´æ€§

# ==================== çŸ¥è¯†åº“ ====================

knowledge:
  enabled: true
  directories: []                   # è¦ç´¢å¼•çš„æœ¬åœ°ç›®å½•

  # --- è¯­ä¹‰æœç´¢ï¼ˆå¯é€‰ï¼Œä¸é…ç½®åˆ™åªç”¨å…³é”®è¯æœç´¢ï¼‰ ---
  #
  # å¼€å¯åæœç´¢èƒ½ç†è§£æ„æ€ï¼ˆå¦‚æœ"å¤©æ°”"ä¹Ÿèƒ½åŒ¹é…"æ°”å€™"ç›¸å…³æ–‡æ¡£ï¼‰ã€‚
  # ä¸å¼€å¯ä¹Ÿå®Œå…¨å¯ç”¨â€”â€”å…³é”®è¯æœç´¢å·²æ”¯æŒä¸­è‹±æ–‡ã€‚
  #
  # semantic_search:
  #   enabled: false                # true å¼€å¯è¯­ä¹‰æœç´¢
  #   provider: "auto"              # "auto" è‡ªåŠ¨é€‰æ‹© | "local" æœ¬åœ°æ¨¡å‹ | "openai" äº‘ç«¯
  #   model: ""                     # ç•™ç©ºä½¿ç”¨é»˜è®¤å€¼
  #
  # ğŸ’¡ æ¨èå®‰è£…æœ¬åœ°å‘é‡æ¨¡å‹ï¼ˆç¦»çº¿å¯ç”¨ï¼Œæ— éœ€ API Keyï¼‰ï¼š
  #    pip install llama-cpp-python
  #    é¦–æ¬¡ä½¿ç”¨è‡ªåŠ¨ä¸‹è½½ BGE-M3 Q4 æ¨¡å‹ï¼ˆ424MBï¼Œä¸­è‹±æ–‡åŒè¯­ï¼‰
  #    æ¨¡å‹å­˜å‚¨ä½ç½®ï¼š~/.xiaodazi/models/
  # è¯­ä¹‰æœç´¢ï¼ˆå¯é€‰ï¼Œéœ€è¦ OpenAI API æˆ–æœ¬åœ°æ¨¡å‹ï¼‰
  semantic_enabled: false           # true å¼€å¯å‘é‡æœç´¢ï¼ˆFTS5 + è¯­ä¹‰æ··åˆï¼‰
  embedding_provider: "auto"        # "auto" / "openai" / "local"
  # embedding_model: ""             # è¦†ç›–é»˜è®¤æ¨¡å‹ï¼ˆé€šå¸¸ä¸éœ€è¦ï¼‰

# ==================== è®°å¿†é…ç½® ====================

memory:
  enabled: true
  smart_retrieval: true
  retention_policy: "user"

# ==================== è§„åˆ’ç³»ç»Ÿ ====================

planning:
  mode: "implicit"

# ==================== Playbook æŒç»­å­¦ä¹  ====================

playbook:
  enabled: true
  auto_extract: true
  min_reward_threshold: 0.7
  require_user_confirm: true
  storage_backend: "file"
