# ä¸Šä¸‹æ–‡å‹ç¼©é…ç½®ï¼ˆä¸‰å±‚é˜²æŠ¤ç­–ç•¥ï¼‰
#
# æ ¸å¿ƒåŸåˆ™ï¼š
# 1. ç”¨æˆ·ä½“éªŒå’Œé—®ç­”æ•ˆæœä¼˜å…ˆ
# 2. è‡ªåŠ¨å¤„ç† + é€æ˜åé¦ˆï¼ˆç±»ä¼¼ Cursorï¼‰
# 3. éä¾µå…¥å¼é€šçŸ¥ï¼Œä¸æ‰“æ–­ç”¨æˆ·æ“ä½œ

# é»˜è®¤ QoS ç­‰çº§
default_qos_level: "pro"

# QoS ç­‰çº§å¯¹åº”çš„ token é¢„ç®—
qos_token_budgets:
  free: 50000        # å…è´¹ç”¨æˆ·
  basic: 150000      # åŸºç¡€ä»˜è´¹
  pro: 200000        # ä¸“ä¸šç‰ˆï¼ˆé»˜è®¤ï¼‰
  enterprise: 1000000  # ä¼ä¸šç‰ˆ

# L2 ç­–ç•¥ï¼šå†å²æ¶ˆæ¯å‹ç¼©é…ç½®
message_compression:
  enabled: true                # æ˜¯å¦å¯ç”¨æ¶ˆæ¯å‹ç¼©
  preserve_first_messages: 4   # å§‹ç»ˆä¿ç•™å¼€å¤´ N æ¡æ¶ˆæ¯ï¼ˆä»»åŠ¡ä¸Šä¸‹æ–‡ï¼‰
  preserve_last_messages: 10   # å°½é‡ä¿ç•™æœ€è¿‘ N æ¡æ¶ˆæ¯ï¼ˆå½“å‰ä¸Šä¸‹æ–‡ï¼‰
  preserve_tool_results: true  # ä¿ç•™ä¸­é—´çš„ tool_resultï¼ˆå«é‡è¦æ•°æ®ï¼‰
  
  # ğŸ†• åŒé˜ˆå€¼å‹ç¼©æœºåˆ¶
  thresholds:
    pre_run: 0.80              # 80% é˜ˆå€¼ - è¿è¡Œå‰é¢„æ£€æŸ¥ï¼ˆAgent å¯åŠ¨å‰ï¼‰
    runtime: 0.92              # 92% é˜ˆå€¼ - è¿è¡Œä¸­å®æ—¶æ£€æŸ¥ï¼ˆAgent æ‰§è¡Œä¸­ï¼‰
  
  # LLM æ‘˜è¦é…ç½®
  summary:
    enabled: false              # æ˜¯å¦ä½¿ç”¨ LLM ç”Ÿæˆæ‘˜è¦ï¼ˆå¦åˆ™ç”¨ç®€å•æˆªå–ï¼‰
    model: "claude-3-haiku"     # æ‘˜è¦ç”Ÿæˆæ¨¡å‹ï¼ˆæ¨èä½¿ç”¨è½»é‡æ¨¡å‹ï¼‰
    max_tokens: 500             # æ‘˜è¦æœ€å¤§ token æ•°
    persist_to_db: true         # æ˜¯å¦æŒä¹…åŒ–æ‘˜è¦åˆ°æ•°æ®åº“

# ğŸ†• å·¥å…·ç»“æœå‹ç¼©é…ç½®
tool_result_compression:
  enabled: true                 # æ˜¯å¦å¯ç”¨å·¥å…·ç»“æœå‹ç¼©
  threshold_chars: 1500         # è¶…è¿‡æ­¤å­—ç¬¦æ•°è‡ªåŠ¨å‹ç¼©
  store_full_content: true      # æ˜¯å¦å­˜å‚¨å®Œæ•´å†…å®¹ä»¥ä¾¿æ¢å¤
  
  # å·¥å…·å¯é€šè¿‡åœ¨è¿”å› dict ä¸­è®¾ç½® _compression_hint å­—æ®µè‡ªä¸»å£°æ˜å‹ç¼©ç­–ç•¥ï¼š
  #   "skip"   = ä¸å‹ç¼©ï¼ˆè¯»æ“ä½œç­‰ Agent éœ€è¦å®Œæ•´å†…å®¹çš„åœºæ™¯ï¼‰
  #   "normal" = æŒ‰é»˜è®¤é˜ˆå€¼å‹ç¼©
  #   "force"  = ä½¿ç”¨è¾ƒä½é˜ˆå€¼å¼ºåˆ¶å‹ç¼©ï¼ˆè¶…å¤§è¾“å‡ºèµ° scratchpadï¼‰
  #   ä¸æºå¸¦   = èµ°é»˜è®¤é˜ˆå€¼é€»è¾‘
  # å‚è§ core/tool/executor.py _maybe_compact() å’Œ tools/nodes_tool.py _action_run()

  # ä»¥ä¸‹å·¥å…·ç»“æœå§‹ç»ˆè·³è¿‡å‹ç¼©ï¼ˆå…œåº•ç™½åå•ï¼‰
  skip_tools:
    - plan_todo
    - memory
    - ask_user
    - human_confirmation

# L3 ç­–ç•¥ï¼šåç«¯é¢„è­¦é…ç½®
backend_warning:
  warning_threshold: 0.8     # 80% æ—¶åç«¯æ—¥å¿—è­¦å‘Š
  enable_metrics: true       # å¯ç”¨ token ä½¿ç”¨ç»Ÿè®¡

# ğŸ†• V6.3: ç”¨æˆ·é€šçŸ¥é…ç½®
user_notifications:
  # æ˜¯å¦å¯ç”¨ä¸Šä¸‹æ–‡ç®¡ç†é€šçŸ¥
  enable_notifications: true
  
  # é€šçŸ¥çº§åˆ«
  # - silent: å®Œå…¨é™é»˜ï¼ˆä»…åç«¯æ—¥å¿—ï¼‰
  # - minimal: ä»…å…³é”®æ“ä½œï¼ˆå‹ç¼©/å¤§é‡è£å‰ªï¼‰
  # - detailed: æ‰€æœ‰æ“ä½œï¼ˆæ¨èï¼Œç±»ä¼¼ Cursorï¼‰
  notification_level: "detailed"
  
  # ğŸ†• ä¸Šä¸‹æ–‡è¿›åº¦æ¡é…ç½®
  progress_bar:
    enabled: true              # æ˜¯å¦æ˜¾ç¤ºè¿›åº¦æ¡
    position: "top"            # top / bottom / sidebar
    show_percentage: true      # æ˜¾ç¤ºç™¾åˆ†æ¯”
    show_tokens: true          # æ˜¾ç¤º token æ•°å€¼
    update_frequency: "realtime"  # realtime / on_message
    
    # é¢œè‰²é˜ˆå€¼ï¼ˆç™¾åˆ†æ¯”ï¼‰
    color_thresholds:
      green_max: 60            # 0-60% ç»¿è‰²
      yellow_max: 80           # 60-80% é»„è‰²
      orange_max: 95           # 80-95% æ©™è‰²
      # 95-100% çº¢è‰²
  
  # è£å‰ª/å‹ç¼©é€šçŸ¥é…ç½®
  trimming_notifications:
    show_tokens_saved: true    # æ˜¾ç¤ºèŠ‚çœçš„ tokens
    show_preserved_count: true # æ˜¾ç¤ºä¿ç•™çš„æ¶ˆæ¯æ•°
    auto_dismiss_seconds: 5    # è‡ªåŠ¨æ¶ˆå¤±æ—¶é—´ï¼ˆç§’ï¼‰
    
    # é€šçŸ¥æ ·å¼
    style:
      position: "top"          # top / bottom
      theme: "subtle"          # subtle / prominent
      show_learn_more: true    # æ˜¾ç¤º"äº†è§£æ›´å¤š"é“¾æ¥

# å¤±è´¥ç»éªŒæ€»ç»“ï¼ˆMVPï¼‰
failure_summary:
  enabled: true
  trigger_on_stop_reasons:
    - "max_turns_reached"
  # ä¿ç•™æœ€è¿‘æ¶ˆæ¯æ¡æ•°ï¼ˆNone åˆ™æ²¿ç”¨ ContextStrategyï¼‰
  keep_recent_messages: 20
  # è¾“å…¥/è¾“å‡ºå­—ç¬¦ä¸Šé™ï¼ˆæ§åˆ¶æˆæœ¬ï¼‰
  max_input_chars: 12000
  max_summary_chars: 1200
  max_block_chars: 1000
